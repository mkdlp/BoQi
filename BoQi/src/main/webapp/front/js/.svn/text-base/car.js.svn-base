//JavaScript Document
$(function(){
	$('.city_left').mouseover(function(){
		$('.city_left').css('border-left','1px solid #CCC');
		$('.city_left').css('border-right','1px solid #CCC');
		$('.City_list_select').css('display','block');
	});
	$('.city_left').mouseout(function(){
		$('.city_left').css('border-left','1px solid #FFF');
		$('.city_left').css('border-right','1px solid #FFF');
		$('.City_list_select').css('display','none');
	});
	$('.City_list_select').mouseover(function(){
		$('.city_left').css('border-left','1px solid #CCC');
		$('.city_left').css('border-right','1px solid #CCC');
		$('.City_list_select').css('display','block');		
	});
	$('.City_list_select').mouseout(function(){
		$('.city_left').css('border-left','1px solid #FFF');
		$('.city_left').css('border-right','1px solid #FFF');
		$('.City_list_select').css('display','none');		
	});
    // $(".")
	$('.top-lix').mouseover(function(){
		$('.top-lix').css('outline','1px solid #CCC');
		$('#toolbar-linjian').css('display','block');
	});
	$('.top-lix').mouseout(function(){
		$('.top-lix').css('outline','0px solid #CCC');
		$('#toolbar-linjian').css('display','none');
	});	
    
    
    
});


//购物车显示点击加入购物车的商品信息
$(function(){
	showShoppingCart();
});
//显示的方法
function showShoppingCart(){
	var info='';

	var goods=window.localStorage.getItem('goods');
	goods=JSON.parse(goods);
	console.info(goods)
	if(goods!=null){
		$.each(goods.goods,function(i,good){
			var total = Number(good.count)*Number(good.price);
			info +='<tr class="product_list"><td class="pname_product"><img src="'+good.img+'"/><a>'+good.title+'</a>'
                    +'</td><td class="weight_product">'+good.weight+'</td><td class="price_product">'+good.price+'</td>'
                    +'<td class="cheap_product"></td><td class="acounts_product">'
                    +'<input class="reduce_product" type="button" value="-"/>'
                    +'<input class="counts_product" type="text" value="'+good.count+'"/>'
                    +'<input class="plus_product" type="button" value="+"/></td>'
                	+'<td class="small_product">'+total+'</td>'
                    +'<td class="active_product"><a target="_blank" href="">移入收藏夹</a>'
                    +'<a href="javascript:void(0)" class="delete" onClick="del(this)">删除</a></td></tr>';
                    // console.info(Number(good.count)*Number(good.price))
			console.info(good.title+','+good.weight+','+good.count+','+good.price+','+good.img);
		});



		

		// var objs=goods.good;
		// if(objs == null) return;
		// for(var i=0;i<objs.length;i++){
			
			//有错
			// info+="<tr class='product_list'><td class='pname_product'>"
			// +objs[i].proname+"</td><td class='weight_product'>"+objs[i].proweight+"</td><td class='price_product'>"
			// +objs[i].proprice+"</td><td class='cheap_product'>"+""+"</td class='counts_product'><td><input type='text' value='"
			// +objs[i].procounts+"'/></td><td class='active_product'><a href=\"javascript:delGoodFromCart('"
			// +objs[i].id+"')\">del</a></td><td class='small_product'>"+objs[i].proxiaojie+"</td></tr>";
		// }

	$(".productinfo").html($(info));
	}
}

//点击删除，从购物车删除商品
	function delProduct(id){
		var goods=window.localStorage.getItem('goods');
		goods=JSON.parse(goods);
		if(good!=null){
			var objs=goods.good;
			for(var i=0;i<objs.length;i++){
				objs.splice(i,1);
				goods=JSON.stringify(goods);
				window.localStorage.setItem('goods',goods);
				return showShoppingCart();
			}
		}
	}


   /*$(document).ready(function(){
        function GetQueryString(name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
            var r = window.location.search.substr(1).match(reg);  //获取url中"?"符后的字符串并正则匹配
            var context = "";
            if (r != null)
                 context = r[2];
            reg = null;
            r = null;
            return context == null || context == "" || context == "undefined" ? "" : context;
        }
        
        $("#p").text(GetQueryString("txt"));
    })*/




//数量的改变
$(document).ready(function(){
    // alert(34);
    var data=$(".counts_product");
    $('.reduce_product').attr('disabled',true);
    //数量的增加
    $(".plus_product").click(function(){
        data.val(parseInt(data.val())+1);
        if(parseInt(data.val())!=1){
             $(".reduce_product").attr("disabled",false);
           
        }
    });
    //数量的减小
    $(".reduce_product").click(function(){
           alert(data);
        data.val(parseInt(data.val())-1);
        if(parseInt(data.val())==1){
            $(".reduce_product").attr('disabled',true);
        }
    });
});



