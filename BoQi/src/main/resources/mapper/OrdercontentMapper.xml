<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.yc.boqi.mapper.OrdercontentMapper" >
	<!-- 添加一个订单 -->
	<insert id="addOrder" parameterType="OrderContent">
		<selectKey keyColumn="orderid" keyProperty="orderid" resultType="int" order="BEFORE">
			select seq_orderid.nextval orderid from dual
		</selectKey>
		insert into ordercontent values(#{orderid},1,#{usid},#{addid},to_date(#{starttime},'yyyy-mm-dd hh24:mi:ss'),null,null,#{ordersum},'','')
	</insert>
	<!-- 添加订单详情 -->
	<insert id="addFrom" parameterType="map">
		insert into orderform values(#{orderid},#{proid},#{pronum},#{bqpri},1,orderform_add.nextval,null)
	</insert>
	<!-- 查询所有的订单 -->
	<select id="getAll" parameterType="map" resultType="OrderContent">
		select * from(select a.*,rownum rn from (select o.*,b.uname from ordercontent o,bquserinfo b order by orderid) a where
		rownum<![CDATA[<]]>=#{one}) b where rn<![CDATA[>]]>#{two}
	</select>
</mapper>